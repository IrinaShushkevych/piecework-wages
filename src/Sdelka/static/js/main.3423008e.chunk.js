(window.webpackJsonpreact_sdelka=window.webpackJsonpreact_sdelka||[]).push([[0],{175:function(e,t,a){"use strict";a.r(t);var o=a(0),n=a.n(o),r=a(34),s=a.n(r),i=(a(49),a(16)),l=a(14),c=a(2),d=a(3),u=a(5),p=a(4),h=a(6),b=a(18),f=a(37),m=f.create({baseURL:"http://sdelka/php/"}),v=function(e,t){return m.get("user_connect.php?userlogin="+e+"&userpassword="+t)},g=function(e){return m.get("user_role.php?userid="+e)};function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(a,!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var k={userLogin:"",userPassword:"",userName:"",userId:0,userAccess:0,userRoles:null,selectMainMenu:[]},_=function(e,t){return function(a){v(e,t).then((function(o){if(1===o.data.resultCode)alert(o.data.value);else{var n=o.data.value[0].id,r=o.data.value[0].name_user;g(n).then((function(o){a(function(e,t,a,o,n){return{type:"login",logname:e,password:t,userid:a,name:o,roles:n}}(e,t,n,r,o.data))}))}}))}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login":return window.sessionStorage.setItem("login",t.logname),window.sessionStorage.setItem("password",t.password),y({},e,{userLogin:t.logname,userPassword:t.password,userId:t.userid,userName:t.name},e.selectMainMenu,{selectMainMenu:t.roles});case"logout":return y({},e,{userPassword:"",userId:0});case"set_menu":return y({},e,{userSelectMenu:t.comp});default:return e}},C=function(e){function t(){var e,a;Object(c.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={login:a.props.userLogin,password:a.props.userPassword},a.onLoginChange=function(e){a.setState({login:e.currentTarget.value})},a.onPasswordChange=function(e){a.setState({password:e.currentTarget.value})},a.connectedUser=function(){a.props.setConnect(a.state.login,a.state.password)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.userPassword!==this.props.userPassword&&this.setState({password:this.props.userPassword})}},{key:"render",value:function(){return 0===this.props.userId?n.a.createElement("div",{className:"sdelkamain"},n.a.createElement("input",{type:"text",placeholder:"Enter your login",value:this.state.login,onChange:this.onLoginChange}),n.a.createElement("input",{type:"text",placeholder:"Enter your password",value:this.state.password,onChange:this.onPasswordChange}),n.a.createElement("button",{onClick:this.connectedUser},"\u0412\u0445\u0456\u0434")):null}}]),t}(n.a.Component),D=Object(l.b)((function(e){return{userLogin:e.loguser.userLogin,userPassword:e.loguser.userPassword,userId:e.loguser.userId}}),{setConnect:_})(C),O=a(20),H=function(e){var t=e.userId,a=e.selectMainMenu,o=e.DisconectingUser,r=a.map((function(e){return n.a.createElement(i.b,{key:e.code_dov,className:"dovbutton",to:"/"+e.component,onClick:function(){return window.sessionStorage.setItem("maincomp","/"+e.component)}},n.a.createElement("span",null,e.name_dovid))}));return 0===t?null:n.a.createElement("div",{className:"wraper"},n.a.createElement("div",{className:"navdiv"},n.a.createElement("div",{className:"ribbon"},r,n.a.createElement(i.b,{className:"dovbutton",to:"/",onClick:function(){window.sessionStorage.removeItem("password"),o()}},n.a.createElement("span",null," \u0412\u0438\u0445\u0456\u0434 ")))))},j=a(7),S=a.n(j),R=a(21),x=f.create({baseURL:"http://sdelka/php/"}),M=function(e){return x.get("dovidnuku.php?userid="+e)},P=function(e,t){return x.get("dovidnuk_user_select.php?userid="+t+"&dovid="+e)},I=function(e){return x.get("dovidnuk_button.php?dovid="+e)},V=function(e,t){return console.log("------API --  TableHeader-------"),console.log("dovidnuk_table.php?dovid="+e+"&butid="+t),x.get("dovidnuk_table.php?dovid="+e+"&butid="+t)},A=function(e,t,a){return x.get("dovidnuk_data.php?dovid="+e+"&id="+t+"&userlogin="+a)},L=function(e,t,a){return x.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",x.post("dovidnuk_ins_upd.php",{userroles:e,datafields:t,id:a})},F=function(e,t){return x.get("dovidnuk_del.php?dovid="+e+"&id="+t)},B=function(e,t){return x.get("dovidnuk_select_button.php?id_dov="+e+"&id_but="+t)},N=function(e,t,a,o){return console.log("---------- API ---------"),console.log(e),console.log(t),console.log(a),console.log(o),console.log(e+"?data_dov="+t+"&data_but="+a+"&data_id="+o),console.log("------------------------"),x.get(e+"?data_dov="+t+"&data_but="+a+"&data_id="+o)},T=function(e,t,a,o,n){return console.log("API ------"),console.log(o),console.log(a),x.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",x.post("dovidnuk_add_ref_data.php",{data_dov:e,data_but:n,datafields:a,datacombo:o,data_id:t})};function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function J(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(a,!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var W="set_selected_dovidnuk",X="get_selection_condition",q="get_dovidnuk_buttons",z="user_sected_selection_condition",G="set_user_select_row",K="set_data_selected_button",Q={selectDov:0,selectDovRow:-1,is_view_table:1,dataDovidnuk:[],dataSelectionConditions:[],selectedDataSelectionConditions:[],dovButtons:[],tableHeader:[],tableData:[],tableRowCombo:[],refId:0,refBut:0,refCode:-1,refType:"",refFileResult:"",refHeader:[],refData:[],refCombo:[],isModal:0},Y=function(e,t){return{type:z,dataindex:e,data:t}},Z=function(e){return{type:"get_table_header",tableheader:e}},$=function(e){return{type:"get_table_data",tabledatas:e}},ee=function(e,t,a,o,n,r,s,i,l){return{type:K,ref_but:e,ref_code:t,ref_type:a,ref_header:o,ref_data:n,ref_combo:r,ref_id:s,is_modal:i,ref_result:l}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return J({},e,{selectDov:t.id_dov});case"set_all_dovidnuku":return J({},e,{dataDovidnuk:t.arrdov});case X:return J({},e,{dataSelectionConditions:t.selcondarr,selectedDataSelectionConditions:t.selcondarr.map((function(e){return-1}))});case q:return J({},e,{dovButtons:t.butt});case z:for(var a=[],o=0;o<e.selectedDataSelectionConditions.length;o++)o===t.dataindex?a[o]=t.data:a[o]=e.selectedDataSelectionConditions[o];return J({},e,{selectedDataSelectionConditions:a});case"get_table_header":return J({},e,{tableHeader:t.tableheader});case"get_table_data":return J({},e,{tableData:t.tabledatas.table,tableRowCombo:t.tabledatas.combo});case G:return J({},e,{selectDovRow:t.row});case"set_user_edit_row":return J({},e,{tableData:e.tableData.map((function(e,a){return a===t.indexrow?t.datarow:e}))});case K:return J({},e,{refBut:t.ref_but,refId:t.ref_id,refCode:t.ref_code,refType:t.ref_type,refHeader:t.ref_header,refData:t.ref_data,refCombo:t.ref_combo,isModal:t.is_modal,refFileResult:t.ref_result});case"close_modal_form":return J({},e,{isModal:0});default:return e}},ae=function(e){var t=e.userId,a=e.DataDovidnuk,o=e.selectDovidnuk,r=e.userLogin,s=a.map((function(e){return n.a.createElement(i.b,{key:e.code_dovid,className:"dovbutton",to:"/Dovidnuk",onClick:function(){o(e.code_dovid,t,r),window.sessionStorage.setItem("dovcode",e.code_dovid)}},n.a.createElement("span",null,e.name_dovid))}));return n.a.createElement("div",null,n.a.createElement("hr",null),n.a.createElement("div",{className:"wraper"},n.a.createElement("div",{className:"navdiv"},n.a.createElement("div",{className:"ribbon"},s))),n.a.createElement("hr",null))},oe=function(e){var t=e.dataSelectionConditions,a=e.selectedData,o=e.selectdov,r=e.selectSelectionConditions,s=e.userLogin,i=t.map((function(e,t){return n.a.createElement("div",{key:"dovselect"},n.a.createElement("label",null," ",e.field_caption," "),n.a.createElement("select",{key:t,"data-key":t,className:"users_select",id:e.table_user_select,value:a[t],onChange:function(e){r(e.target.getAttribute("data-key"),e.target.value,o,s)}},n.a.createElement("option",{key:"-1",value:"-1"}),e.data_select.map((function(e,t){return n.a.createElement("option",{key:t,value:e.field_user_id},e.field_user_view)}))))}));return t.length>0?n.a.createElement("div",null," ",i," "):null},ne=function(e){function t(){var e,a;Object(c.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={selectRow:0,datarow:{}},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"setSelectRow",value:function(){this.setState({selectRow:1})}},{key:"setEditValue",value:function(e,t){var a=this.state.datarow;a[e]=t,this.setState({datarow:a})}},{key:"saveEditValue",value:function(){var e={},t=0,a=0,o=0;for(a=0;a<this.props.dataSelectionConditions.length;a++)if(-1!==this.props.selectDataSelectionConditions[a]&&"undefined"!==this.props.selectDataSelectionConditions[a]){e[o]=[],e[o][0]=this.props.dataSelectionConditions[a].user_field,e[o][1]=null;for(var n=0;n<this.props.dataSelectionConditions[a].data_select.length;n++)this.props.dataSelectionConditions[a].data_select[n].field_user_id===this.props.selectDataSelectionConditions[a]&&(e[o][2]=this.props.dataSelectionConditions[a].data_select[n].field_id,t=this.props.selectDataSelectionConditions[a]);e[o][3]="int",o++}for(a=0;a<this.props.tableHeader.length;a++)if(e[o+a]=[],e[o+a][0]=this.props.tableHeader[a].name_table,e[o+a][3]=this.props.tableHeader[a].type_col,this.props.tableRowCombo&&this.props.tableRowCombo[this.props.tableHeader[a].name_table])for(e[o+a][1]=null,e[o+a][2]=null,n=0;n<this.props.tableRowCombo[this.props.tableHeader[a].name_table].length;n++)this.props.tableRowCombo[this.props.tableHeader[a].name_table][n].name_col===this.props.tablerow[this.props.tableHeader[a].name_table]&&(e[o+a][1]=this.props.tableRowCombo[this.props.tableHeader[a].name_table][n].id),this.props.tableRowCombo[this.props.tableHeader[a].name_table][n].name_col===this.state.datarow[this.props.tableHeader[a].name_table]&&(e[o+a][2]=this.props.tableRowCombo[this.props.tableHeader[a].name_table][n].id);else e[o+a][1]=this.props.tablerow[this.props.tableHeader[a].name_table],e[o+a][2]=this.state.datarow[this.props.tableHeader[a].name_table];this.props.setEditRow(this.props.index,this.state.datarow,this.state.datarow[0],this.props.selectDov,e,t,this.props.userLogin),this.setState({selectRow:0})}},{key:"unsaveEditValue",value:function(){var e={};e[0]=this.props.tablerow[0];for(var t=0;t<this.props.tableHeader.length;t++)e[this.props.tableHeader[t].name_table]=this.props.tablerow[this.props.tableHeader[t].name_table];this.setState({datarow:e,selectRow:0})}},{key:"deleteEditValue",value:function(){var e=0,t=0;for(t=0;t<this.props.dataSelectionConditions.length;t++)if(-1!==this.props.selectDataSelectionConditions[t]&&"undefined"!==this.props.selectDataSelectionConditions[t])for(var a=0;a<this.props.dataSelectionConditions[t].data_select.length;a++)this.props.dataSelectionConditions[t].data_select[a].field_user_id===this.props.selectDataSelectionConditions[t]&&(e=this.props.selectDataSelectionConditions[t]);this.props.deleteValue(this.props.selectDov,this.props.tablerow[0],this.props.userLogin,e),this.setState({selectRow:0})}},{key:"clickButton",value:function(e){this.props.clickButton(this.props.selectDov,e,this.props.tablerow[0])}},{key:"componentDidMount",value:function(){this.unsaveEditValue()}},{key:"componentDidUpdate",value:function(e,t){if(e.tablerow!==this.props.tablerow){var a={};a[0]=this.props.tablerow[0];for(var o=0;o<this.props.tableHeader.length;o++)a[this.props.tableHeader[o].name_table]=this.props.tablerow[this.props.tableHeader[o].name_table];this.setState({datarow:a})}}},{key:"RowCombo",value:function(e){var t=this;return this.props.tableRowCombo&&this.props.tableRowCombo[this.props.tableHeader[e].name_table]?n.a.createElement("td",{key:e},n.a.createElement("select",{className:"dovinputtable",value:this.state.datarow[this.props.tableHeader[e].name_table],"data-key":this.props.tableHeader[e].name_table,onChange:function(e){t.setEditValue(e.target.getAttribute("data-key"),e.target.value)}},n.a.createElement("option",{key:-1,value:-1}),this.props.tableRowCombo[this.props.tableHeader[e].name_table].map((function(e){return n.a.createElement("option",{key:e.id,value:e.name_col},e.name_col)})))):"log"===this.props.tableHeader[e].type_col?n.a.createElement("td",{key:e},n.a.createElement("input",{type:"checkbox","data-key":this.props.tableHeader[e].name_table,checked:this.state.datarow[this.props.tableHeader[e].name_table],onChange:function(e){e.target.checked?t.setEditValue(e.target.getAttribute("data-key"),1):t.setEditValue(e.target.getAttribute("data-key"),0)}})):n.a.createElement("td",{key:e},n.a.createElement("input",{className:"dovinputtable",type:"text",value:this.state.datarow[this.props.tableHeader[e].name_table],"data-key":this.props.tableHeader[e].name_table,onChange:function(e){t.setEditValue(e.target.getAttribute("data-key"),e.target.value)}}))}},{key:"render",value:function(){for(var e=this,t=[],a=[],o=0;o<this.props.tableHeader.length;o++)1===this.state.selectRow?t[o]=this.RowCombo(o):"log"===this.props.tableHeader[o].type_col?t[o]=n.a.createElement("td",{key:this.props.tableHeader[o].name_table},n.a.createElement("input",{type:"checkbox",checked:this.state.datarow[this.props.tableHeader[o].name_table]})):t[o]=n.a.createElement("td",{key:this.props.tableHeader[o].name_table},this.state.datarow[this.props.tableHeader[o].name_table]);var r=0;for(o=0;o<this.props.dovbutton.length;o++)1===this.props.dovbutton[o].in_row&&(r++,a[o]=n.a.createElement("td",{key:this.props.dovbutton[o].id_button},n.a.createElement("button",{value:this.props.dovbutton[o].name_button,"data-key":this.props.dovbutton[o].id_button,"data-id":this.props.index,onClick:function(t){console.log("00000000"),e.clickButton(t.target.getAttribute("data-key"),t.target.getAttribute("data-id"))}},this.props.dovbutton[o].name_button)));var s=[];return s[0]=n.a.createElement("tr",{key:this.props.index,"data-key":this.props.index,onDoubleClick:function(){e.setSelectRow()}},t,a),1===this.state.selectRow&&(s[1]=n.a.createElement("tr",{key:this.props.index},n.a.createElement("td",{key:1,colSpan:this.props.tableHeader.length+r},n.a.createElement("button",{onClick:function(){e.saveEditValue()}},"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u043c\u0456\u043d\u0438"),n.a.createElement("button",{onClick:function(){e.unsaveEditValue()}},"\u0412\u0456\u0434\u043c\u0456\u043d\u0438\u0442\u0438 \u0437\u043c\u0456\u043d\u0438"),n.a.createElement("button",{onClick:function(){e.deleteEditValue()}},"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438")))),n.a.createElement(n.a.Fragment,null,s)}}]),t}(n.a.Component),re=function(e){function t(){var e,a;Object(c.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={selectRow:0,datarow:{}},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"setSelectRow",value:function(){this.setState({selectRow:1})}},{key:"setEditValue",value:function(e,t){var a=this.state.datarow;a[e]=t,this.setState({datarow:a})}},{key:"saveEditValue",value:function(){var e={},t=0,a=0,o=0;for(a=0;a<this.props.dataSelectionConditions.length;a++)if(-1!==this.props.selectDataSelectionConditions[a]&&"undefined"!==this.props.selectDataSelectionConditions[a]){e[o]=[],e[o][0]=this.props.dataSelectionConditions[a].user_field,e[o][1]=null;for(var n=0;n<this.props.dataSelectionConditions[a].data_select.length;n++)this.props.dataSelectionConditions[a].data_select[n].field_user_id===this.props.selectDataSelectionConditions[a]&&(e[o][2]=this.props.dataSelectionConditions[a].data_select[n].field_id,t=this.props.selectDataSelectionConditions[a]);e[o][3]="int",o++}for(a=0;a<this.props.tableHeader.length;a++)if(e[o+a]=[],e[o+a][0]=this.props.tableHeader[a].name_table,e[o+a][3]=this.props.tableHeader[a].type_col,this.props.tableRowCombo&&this.props.tableRowCombo[this.props.tableHeader[a].name_table])for(e[o+a][1]=null,e[o+a][2]=null,n=0;n<this.props.tableRowCombo[this.props.tableHeader[a].name_table].length;n++)this.props.tableRowCombo[this.props.tableHeader[a].name_table][n].name_col===this.props.tablerow[this.props.tableHeader[a].name_table]&&(e[o+a][1]=this.props.tableRowCombo[this.props.tableHeader[a].name_table][n].id),this.props.tableRowCombo[this.props.tableHeader[a].name_table][n].name_col===this.state.datarow[this.props.tableHeader[a].name_table]&&(e[o+a][2]=this.props.tableRowCombo[this.props.tableHeader[a].name_table][n].id);else e[o+a][1]=this.props.tablerow[this.props.tableHeader[a].name_table],e[o+a][2]=this.state.datarow[this.props.tableHeader[a].name_table];this.props.setEditRow(this.props.index,this.state.datarow,this.state.datarow[0],this.props.selectDov,e,t,this.props.userLogin),this.setState({selectRow:0})}},{key:"unsaveEditValue",value:function(){var e={};e[0]=this.props.tablerow[0];for(var t=0;t<this.props.tableHeader.length;t++)"log"!==this.props.tableHeader[t].type_col&&"int"!==this.props.tableHeader[t].type_col||void 0!==this.props.tablerow[this.props.tableHeader[t].name_table]?e[this.props.tableHeader[t].name_table]=this.props.tablerow[this.props.tableHeader[t].name_table]:e[this.props.tableHeader[t].name_table]=0;this.setState({datarow:e,selectRow:0})}},{key:"clickButton",value:function(e){this.props.clickButton(this.props.selectDov,e,this.props.tablerow[0])}},{key:"componentDidMount",value:function(){this.unsaveEditValue()}},{key:"componentDidUpdate",value:function(e,t){if(e.tablerow!==this.props.tablerow){var a={};a[0]=this.props.tablerow[0];for(var o=0;o<this.props.tableHeader.length;o++)"log"!==this.props.tableHeader[o].type_col&&"int"!==this.props.tableHeader[o].type_col||void 0!==this.props.tablerow[this.props.tableHeader[o].name_table]?a[this.props.tableHeader[o].name_table]=this.props.tablerow[this.props.tableHeader[o].name_table]:a[this.props.tableHeader[o].name_table]=0;this.setState({datarow:a})}}},{key:"RowCombo",value:function(e){var t=this;return this.props.tableRowCombo&&this.props.tableRowCombo[this.props.tableHeader[e].name_table]?n.a.createElement("td",{key:e},n.a.createElement("select",{className:"dovinputtable",value:this.state.datarow[this.props.tableHeader[e].name_table],"data-key":this.props.tableHeader[e].name_table,onChange:function(e){t.setEditValue(e.target.getAttribute("data-key"),e.target.value)}},n.a.createElement("option",{key:-1,value:-1}),this.props.tableRowCombo[this.props.tableHeader[e].name_table].map((function(e){return n.a.createElement("option",{key:e.id,value:e.name_col},e.name_col)})))):"log"===this.props.tableHeader[e].type_col?n.a.createElement("td",{key:e},n.a.createElement("input",{type:"checkbox","data-key":this.props.tableHeader[e].name_table,onChange:function(e){t.setEditValue(e.target.getAttribute("data-key"),e.target.checked)}})):n.a.createElement("td",{key:e},n.a.createElement("input",{className:"dovinputtable",type:"text",value:this.state.datarow[this.props.tableHeader[e].name_table],"data-key":this.props.tableHeader[e].name_table,onChange:function(e){t.setEditValue(e.target.getAttribute("data-key"),e.target.value)}}))}},{key:"render",value:function(){for(var e=this,t=[],a=[],o=0;o<this.props.tableHeader.length;o++)1===this.state.selectRow?t[o]=this.RowCombo(o):"log"===this.props.tableHeader[o].type_col?t[o]=n.a.createElement("td",{key:this.props.tableHeader[o].name_table},n.a.createElement("input",{type:"checkbox",readonly:!0})):t[o]=n.a.createElement("td",{key:this.props.tableHeader[o].name_table});var r=0;for(o=0;o<this.props.dovbutton.length;o++)1===this.props.dovbutton[o].in_row&&(r++,a[o]=n.a.createElement("td",{key:this.props.dovbutton[o].id_button}," "));var s=[];return s[0]=n.a.createElement("tr",{key:this.props.index,"data-key":-1,onDoubleClick:function(){e.setSelectRow()}},t,a),1===this.state.selectRow&&(s[1]=n.a.createElement("tr",null,n.a.createElement("td",{colSpan:this.props.tableHeader.length+r},n.a.createElement("button",{onClick:function(){e.saveEditValue()}},"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u043c\u0456\u043d\u0438"),n.a.createElement("button",{onClick:function(){e.unsaveEditValue()}},"\u0412\u0456\u0434\u043c\u0456\u043d\u0438\u0442\u0438 \u0437\u043c\u0456\u043d\u0438")))),n.a.createElement(n.a.Fragment,null,s)}}]),t}(n.a.Component),se=a(47),ie=function(e){function t(){var e,a;Object(c.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={values:[],changes:[]},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"setValues",value:function(e,t){var a=0;0===t?(t=1,a=1):t=0;var o=Object(se.a)(this.state.values);o[e].checkes=t;var n=Object(se.a)(this.state.changes);n[e]=a,this.setState({values:o,changes:n})}},{key:"closeModal",value:function(){this.props.closeModalForms()}},{key:"setEditValue",value:function(e,t,a){console.log("----------setEditValue ["+e+"]"+t+" = "+a);var o=this.state.values;o[e][t]=a,this.setState({values:o})}},{key:"saveValue",value:function(){console.log("save value table"),console.log(this.state.values);for(var e=0,t=[],a=[],o=0;o<this.state.values.length;o++)1===this.state.values[o].checkes&&(t[e]=this.state.values[o].id,e++);for(o=0;o<this.state.values.length;o++)if(1===this.state.values[o].checkes){a[o]=[];var n=0;for(e=0;e<this.props.refHeader.length;e++)if(1===this.props.refHeader[e].ins)if(this.props.refCombo[this.props.refHeader[e].name_table])for(var r=0;r<this.props.refCombo[this.props.refHeader[e].name_table].length;r++)this.props.refCombo[this.props.refHeader[e].name_table][r].name_col===this.state.values[o][this.props.refHeader[e].name_table]&&(console.log("t = "+n),a[o][n]=[],console.log(a),a[o][n][0]=this.props.refHeader[e].name_table,a[o][n][1]=this.props.refCombo[this.props.refHeader[e].name_table][r].id,n++);else console.log("ttt = "+n),a[o][n]=[],console.log(a),a[o][n][0]=this.props.refHeader[e].name_table,a[o][n][1]=this.state.values[o][this.props.refHeader[e].name_table],n++}console.log("SAVE RDATA"),console.log(a),console.log(this.props.selectDov),console.log(this.props.refbut),console.log(this.props.refid),this.props.setRefData(this.props.selectDov,this.props.refbut,t,a,this.props.refid)}},{key:"componentDidMount",value:function(){for(var e=[],t=0;t<this.props.refData.length;t++)e[t]=0;console.log("array for changes"),console.log(e),this.setState({values:this.props.refData,changes:e})}},{key:"render",value:function(){var e=this;console.log("render table"),console.log(this.state),console.log(this.props);var t,a,o,r={width:"500px",height:this.props.heightForm-30,overflow:"scroll"},s=this.props.refHeader.map((function(e,t){if(""!==e.name_col)return n.a.createElement("th",{key:t},e.name_col)})),i=null;return i="undefined"!==typeof this.props.refData[0].checkes?n.a.createElement("tr",{style:{height:"40px"},key:-1}," ",n.a.createElement("th",{key:-1})," ",s," "):n.a.createElement("tr",{key:-1}," ",s," "),o=this.state.values.map((function(t,a){var o=0,r=[],s=function(s){if("checkes"===s)r[o]=n.a.createElement("td",{key:o},"  ",n.a.createElement("input",{type:"checkbox",name:"checkvalue",value:a,checked:t[s],onChange:function(o){e.setValues(a,t[s])}}));else if("id"!==s)for(l=0;l<e.props.refHeader.length;l++)e.props.refHeader[l].name_table===s&&("log"===e.props.refHeader[l].type_col?0===e.state.changes[a]?r[o]=n.a.createElement("td",{key:o},n.a.createElement("input",{type:"checkbox","data-key":e.props.refHeader[l].name_table,checked:t[s]})):r[o]=n.a.createElement("td",{key:o},n.a.createElement("input",{type:"checkbox","data-key":e.props.refHeader[l].name_table,"data-index":a,checked:t[s],onChange:function(t){console.log("changed id_brigadir"),t.target.checked?e.setEditValue(t.target.getAttribute("data-index"),t.target.getAttribute("data-key"),1):e.setEditValue(t.target.getAttribute("data-index"),t.target.getAttribute("data-key"),0)}})):0===e.state.changes[a]||0===e.props.refHeader[l].ins?r[o]=n.a.createElement("td",{key:o},"  ",t[s],"  "):(console.log("++++++++++++++++"),console.log(e.props.refHeader[o].name_table),console.log(e.props.refCombo[e.props.refHeader[o].name_table]),e.props.refCombo[e.props.refHeader[l].name_table]?r[o]=n.a.createElement("td",{key:o},n.a.createElement("select",{value:t[s],"data-key":e.props.refHeader[l].name_table,"data-index":a,onChange:function(t){e.setEditValue(t.target.getAttribute("data-index"),t.target.getAttribute("data-key"),t.target.value)}},n.a.createElement("option",{key:-1,value:-1}),e.props.refCombo[e.props.refHeader[l].name_table].map((function(e){return n.a.createElement("option",{key:e.id,value:e.name_col},e.name_col)})))):r[o]=n.a.createElement("td",{key:o},n.a.createElement("input",{type:"text",value:t[s],"data-key":e.props.refHeader[l].name_table,"data-index":a,onChange:function(t){e.setEditValue(t.target.getAttribute("data-index"),t.target.getAttribute("data-key"),t.target.value)}}))));o++};for(var i in t){var l;s(i)}return n.a.createElement("tr",{key:a}," ",r," ")})),t=n.a.createElement("table",{className:"TableDespatch"},i,o),a=n.a.createElement("p",null,n.a.createElement("button",{onClick:function(){e.saveValue()}},"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"),n.a.createElement("button",{onClick:function(){e.closeModal()}},"\u0412\u0456\u0434\u043c\u0456\u043d\u0438\u0442\u0438")),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"container",style:r},t),n.a.createElement("div",null,a))}}]),t}(n.a.Component);function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}var ce=function(e){function t(){var e,a;Object(c.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={values:{}},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"setValues",value:function(e,t){var a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(a,!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.state.values);a[e]=t,this.setState({values:a})}},{key:"closeModal",value:function(){this.props.closeModalForms()}},{key:"saveValue",value:function(){console.log("save value password"),console.log(this.state.values)}},{key:"componentDidMount",value:function(){this.setState({values:this.props.refData})}},{key:"render",value:function(){var e,t=this,a=[],o=0;for(var r in e={width:"300px",height:"100px",overflow:"visible"},this.state.values)a[o]=n.a.createElement("p",null,n.a.createElement("label",null," ",this.props.refHeader[r]," "),n.a.createElement("input",{type:"password","data-key":r,value:this.state.values[r],onChange:function(e){t.setValues(e.target.getAttribute("data-key"),e.target.value)}})),o++;return a[o]=n.a.createElement("p",null,n.a.createElement("button",{onClick:function(){t.saveValue()}},"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"),n.a.createElement("button",{onClick:function(){t.closeModal()}},"\u0412\u0456\u0434\u043c\u0456\u043d\u0438\u0442\u0438")),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"container",style:e},a))}}]),t}(n.a.Component);function de(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}var ue=function(e){function t(){var e,a;Object(c.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={values:{}},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"setValues",value:function(e,t){var a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?de(a,!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):de(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.state.values);a[e]=t,this.setState({values:a})}},{key:"closeModal",value:function(){this.props.closeModalForms()}},{key:"saveValue",value:function(){console.log("save value form"),console.log(this.state.values)}},{key:"componentDidMount",value:function(){0===this.props.refCode&&this.setState({values:this.props.refData})}},{key:"render",value:function(){var e=this,t={},a=[];if(0===this.props.refCode)t={width:"300px",height:"100px",top:window.innerHeight/2-50,left:window.innerWidth/2-150},a=n.a.createElement(ce,{refHeader:this.props.refHeader,refData:this.props.refData,closeModalForms:this.props.closeModalForms});else if(2===this.props.refCode){var o=35*this.props.refData.length;window.innerHeight<=o+150?o=window.innerHeight-100:o+=150,t={width:"500px",height:o,top:window.innerHeight/2-(o+100)/2,left:window.innerWidth/2-250},a=n.a.createElement(ie,{refid:this.props.refId,refHeader:this.props.refHeader,refData:this.props.refData,refCombo:this.props.refCombo,closeModalForms:this.props.closeModalForms,heightForm:o,refbut:this.props.refBut,setRefData:this.props.setRefData,selectDov:this.props.selectDov})}return n.a.createElement(n.a.Fragment,null," ",n.a.createElement("div",{id:"modal_form",style:t},n.a.createElement("div",{style:{height:"10px"}},n.a.createElement("span",{id:"modal_close",onClick:function(){e.closeModal()}},"X")),a),n.a.createElement("div",{id:"overlay"}))}}]),t}(n.a.Component),pe=function(e){var t=e.dataSelectionConditions,a=e.selectedDataSelectionConditions,o=e.tableHeader,r=e.tableData,s=e.tableRowCombo,i=e.selectdov,l=e.selectdovrow,c=e.dovButtons,d=e.selectRow,u=e.setEditRow,p=e.clickButton,h=e.deleteRow,b=e.isModal,f=e.refId,m=e.refCode,v=e.refType,g=e.refFileResult,w=e.refHeader,y=e.refData,k=e.refCombo,_=e.closeModalForms,E=e.refBut,C=e.setRefData,D=e.userLogin,O=c.map((function(e,t){if(e.in_row)return n.a.createElement("th",{key:"b"+t})})),H=o.map((function(e,t){return n.a.createElement("th",{key:t},e.name_col)})),j=r.map((function(e,r){return n.a.createElement(ne,{tableHeader:o,tableRowCombo:s,dovbutton:c,tablerow:e,index:r,selectdovrow:l,selectRow:d,selectDov:i,dataSelectionConditions:t,selectDataSelectionConditions:a,setEditRow:u,clickButton:p,deleteValue:h,userLogin:D,isModal:b,refId:f,refCode:m,refType:v,refFileResult:g,refHeader:w,refData:y})})),S=c.map((function(e,t){return e.in_row?null:n.a.createElement("button",{key:t,value:e.id_dovidnuk},e.name_button)}));return n.a.createElement("div",null,S,o.length>0?n.a.createElement("table",{className:"TableDespatch"},n.a.createElement("tbody",null,n.a.createElement("tr",{key:"-2"},H,O),n.a.createElement(re,{tableHeader:o,tableRowCombo:s,dovbutton:c,tablerow:[],index:-1,dataSelectionConditions:t,selectDataSelectionConditions:a,selectdovrow:l,selectRow:d,selectDov:i,setEditRow:u,clickButton:p,deleteValue:h,userLogin:D}),j)):"",function(){if(1===b)return n.a.createElement(ue,{refId:f,refBut:E,refCode:m,refType:v,refFileResult:g,refHeader:w,refData:y,refCombo:k,closeModalForms:_,setRefData:C,selectDov:i})}())},he=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.getDovidnuku(this.props.userId);var e=window.sessionStorage.getItem("dovcode");e&&this.props.selectDovidnuk(e,this.props.userId,this.props.userLogin)}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(ae,{userId:this.props.userId,userLogin:this.props.userLogin,DataDovidnuk:this.props.dovidnuk.dataDovidnuk,selectDovidnuk:this.props.selectDovidnuk}),n.a.createElement(oe,{dataSelectionConditions:this.props.dovidnuk.dataSelectionConditions,selectedData:this.props.dovidnuk.selectedDataSelectionConditions,selectdov:this.props.dovidnuk.selectDov,userLogin:this.props.userLogin,selectSelectionConditions:this.props.selectSelectionConditions}),n.a.createElement(pe,{tableHeader:this.props.dovidnuk.tableHeader,tableData:this.props.dovidnuk.tableData,tableRowCombo:this.props.dovidnuk.tableRowCombo,selectdov:this.props.dovidnuk.selectDov,selectdovrow:this.props.dovidnuk.selectDovRow,dataSelectionConditions:this.props.dovidnuk.dataSelectionConditions,selectedDataSelectionConditions:this.props.dovidnuk.selectedDataSelectionConditions,dovButtons:this.props.dovidnuk.dovButtons,isModal:this.props.dovidnuk.isModal,refId:this.props.dovidnuk.refId,refCode:this.props.dovidnuk.refCode,refType:this.props.dovidnuk.refType,refFileResult:this.props.dovidnuk.refFileResult,refHeader:this.props.dovidnuk.refHeader,refData:this.props.dovidnuk.refData,refCombo:this.props.dovidnuk.refCombo,refBut:this.props.dovidnuk.refBut,selectRow:this.props.selectRow,setEditRow:this.props.setEditRow,clickButton:this.props.buttonClick,deleteRow:this.props.deleteRow,userLogin:this.props.userLogin,closeModalForms:this.props.closeModalForms,setRefData:this.props.setRefData}))}}]),t}(n.a.Component),be=Object(l.b)((function(e){return{dovidnuk:e.dovidnuk,userId:e.loguser.userId,userLogin:e.loguser.userLogin}}),{buttonClick:function(e,t,a){return function(){var o=Object(R.a)(S.a.mark((function o(n){var r,s,i;return S.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,B(e,t);case 2:if(!(r=o.sent)){o.next=19;break}if(0!==r.data[0]){o.next=8;break}n(ee(t,r.data[0],r.data.typedata,r.data.fields,r.data.fieldsdata,[],a,1,r.data.textresult)),o.next=19;break;case 8:if(1!==r.data[0]){o.next=12;break}n(ee(t,r.data[0],r.data.typedata,[],[],[],a,0,"")),o.next=19;break;case 12:return o.next=14,V(e,t);case 14:return s=o.sent,o.next=17,N(r.data.text,e,t,a);case 17:200===(i=o.sent).status&&200===s.status&&(console.log("-----table------"),console.log(i.data.data),console.log(s.data),n(ee(t,r.data[0],r.data.typedata,s.data,i.data.data,i.data.combo,a,1,"")));case 19:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()},selectDovidnuk:function(e,t,a){return function(){var o=Object(R.a)(S.a.mark((function o(n){var r,s;return S.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return n({type:W,id_dov:e}),P(e,t).then((function(e){var t;n((t=e.data,{type:X,selcondarr:t}))})),I(e).then((function(e){var t;n((t=e.data,{type:q,butt:t}))})),o.next=5,V(e,"");case 5:return(r=o.sent)&&n(Z(r.data)),o.next=9,A(e,-9,a);case 9:(s=o.sent)&&n($(s.data));case 11:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()},getDovidnuku:function(e){return function(t){M(e).then((function(e){t({type:"set_all_dovidnuku",arrdov:e.data})}))}},selectSelectionConditions:function(e,t,a,o){return function(){var n=Object(R.a)(S.a.mark((function n(r){var s;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(Y(e,t)),n.next=3,A(a,t,o);case 3:(s=n.sent)&&r($(s.data));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},setTable:function(e,t,a){return function(){var o=Object(R.a)(S.a.mark((function o(n){var r,s;return S.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,V(t,"");case 2:return(r=o.sent)&&n(Z(r.data)),o.next=6,A(t,e,a);case 6:(s=o.sent)&&n($(s.data));case 8:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()},selectRow:function(e){return function(t){t({type:G,row:e})}},setEditRow:function(e,t,a,o,n,r,s){return function(){var e=Object(R.a)(S.a.mark((function e(t){var i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(o,n,a);case 2:if(!e.sent){e.next=8;break}return e.next=6,A(o,r,s);case 6:(i=e.sent)&&t($(i.data));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},deleteRow:function(e,t,a,o){return function(){var n=Object(R.a)(S.a.mark((function n(r){var s;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,F(e,t);case 2:if(!n.sent){n.next=8;break}return n.next=6,A(e,o,a);case 6:(s=n.sent)&&r($(s.data));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},closeModalForms:function(){return function(e){e({type:"close_modal_form"})}},setRefData:function(e,t,a,o,n){return function(){var r=Object(R.a)(S.a.mark((function r(s){var i;return S.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,T(e,n,a,o,t);case 2:i=r.sent,console.log("result insert reff data"),console.log(i.data),200===i.status&&s(ee(0,-1,"",[],[],[],0,0,""));case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})(he),fe=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return 0===this.props.userId?null:n.a.createElement(i.a,null,n.a.createElement(H,{userId:this.props.userId,selectMainMenu:this.props.selectMainMenu,DisconectingUser:this.props.setDisconect}),n.a.createElement(O.a,{exact:!0,path:"/"}),n.a.createElement(O.a,{path:"/Dovidnuk",render:function(){return n.a.createElement(be,e.props)}}))}}]),t}(n.a.Component),me=Object(l.b)((function(e){return{userId:e.loguser.userId,selectMainMenu:e.loguser.selectMainMenu,userSelectMenu:e.loguser.userSelectMenu}}),{setDisconect:function(){return function(e){e({type:"logout"})}}})(fe),ve=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=window.sessionStorage.getItem("login"),t=window.sessionStorage.getItem("password");e&&t&&this.props.setConnect(e,t)}},{key:"render",value:function(){return 0===this.props.userId?n.a.createElement("div",null,n.a.createElement(D,null)):n.a.createElement("div",null,n.a.createElement(me,null))}}]),t}(n.a.Component),ge=Object(l.b)((function(e){return{userId:e.loguser.userId}}),{setConnect:_})(ve),we=a(23),ye={SelectMainMenu:[{name_dovid:"\u0410\u0434\u043c\u0456\u043d\u0456\u0441\u0442\u0440\u0443\u0432\u0430\u043d\u043d\u044f",code_dov:"1"},{name_dovid:"\u0422\u0430\u0431\u0435\u043b\u044e\u0432\u0430\u043d\u043d\u044f",code_dov:"2"},{name_dovid:"\u0414\u043e\u0432\u0456\u0434\u043d\u0438\u043a",code_dov:"3"}]},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login":return e.userLogin=t.logname,e.userPassword=t.password,e.paths="/main",e;case"logout":return e.userLogin="",e.userPassword="",e.paths="/",e;default:return e}},_e=a(70),Ee=a(177),Ce=Object(we.c)({loguser:E,main:ke,dovidnuk:te,form:Ee.a}),De=Object(we.d)(Ce,Object(we.a)(_e.a)),Oe=function(){return n.a.createElement(i.a,null,n.a.createElement(l.a,{store:De},n.a.createElement(ge,null)))};s.a.render(n.a.createElement(Oe,null),document.getElementById("root"))},49:function(e,t,a){},73:function(e,t,a){e.exports=a(175)}},[[73,1,2]]]);
//# sourceMappingURL=main.3423008e.chunk.js.map